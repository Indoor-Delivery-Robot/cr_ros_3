<!--
  KeyOp launcher
 -->

<launch>
  <!-- Load amcl map -->
  <arg name="map_file" default="$(find cr_ros_3)/files/basement_map.yaml"/> <!-- _for_robot -->

  <!-- bringup flask webpage -->
  <include file="$(find cr_web)/launch/bringup.launch"/>
  <!-- launch custom navigation package-->
  <include file="$(find cr_ros_3)/launch/mutant_navigation.launch">
    <arg name="map_file" value="$(arg map_file)"/>
    <arg name="scan_topic" value="scan_filter"/>
    <arg name="open_rviz" value="true"/>
    <arg name="move_forward_only" value="false"/>
  </include>


  <!-- Launch custom code -->
  <!-- Add new nodes here-->
  <node pkg="cr_ros_3" type="turtlebot_teleop_key.py" name="turtlebot_teleop_key" output="screen"></node>
  <node pkg="cr_ros_3" type="message_switch.py" name="message_switch" output="screen"></node>
  <node pkg="cr_ros_3" type="lost_and_found.py" name="lost_and_found" output="screen"></node>
  <node pkg="cr_ros_3" type="process_fid_transforms.py" name="process_fid_transforms" output="screen"></node>
  <node pkg="cr_ros_3" type="hand_gesture.py" name="hand_gesture" output="screen"></node>
  <node pkg="cr_ros_3" type="go_to_person.py" name="go_to_person" output="screen"></node>
  <node pkg="cr_ros_3" type="voice_destination_pub.py" name="voice_destination_pub" output="screen"></node>
  <!-- These nodes are deprecated until hardware changes are made to mutant-->
  <!-- <node pkg="cr_ros" type="whereabouts.py" name="whereabouts" output="screen"></node> -->
  <!-- <node pkg="cr_ros" type="greet.py" name="greet" output="screen"></node> -->
  <!-- <node pkg="cr_ros" type="package_sender.py" name="package_sender" output="screen"></node> -->
  <!-- <node pkg="cr_ros" type="package_handler.py" name="package_handler" output="screen"></node> -->

  <!-- fiducials (Aruco + static fid transforms -->
  <arg name="fids" default="true">
  <group if="$(arg fids)">
   <include file="$(find cr_ros_3)/launch/fiducials.launch"/>
  </group>
  <!-- NOTE: this 4-line block above can be used to modularly build a luanch file, with chunks of connected nodes that can be toggled on and off together-->

</launch>
